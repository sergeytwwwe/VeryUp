local function initSettings(SettingsTab)
    if not SettingsTab or type(SettingsTab) ~= "table" then
        warn("Invalid SettingsTab provided")
        return
    end

    SettingsTab:Separator({Text = "General Settings"})
    SettingsTab:Label({Text = "Settings tab loaded successfully."})
    SettingsTab:Combo({
        IniFlag = "Theme",
        Label = "Theme",
        Items = {"DarkTheme", "LightTheme"},
        Selected = "DarkTheme",
        Callback = function(self, value)
            SettingsTab.Parent:SetTheme(value)
            print("Theme changed to: " .. value)
        end
    })
    SettingsTab:Checkbox({
        IniFlag = "MobileMode",
        Label = "Mobile Mode",
        Value = SettingsTab.Parent.Parent:IsMobileDevice(),
        Disabled = true,
        Callback = function(self, value)
            print("Mobile Mode: " .. tostring(value))
        end
    })
    SettingsTab:Checkbox({
        IniFlag = "ConsoleMode",
        Label = "Console Mode",
        Value = SettingsTab.Parent.Parent:IsConsoleDevice(),
        Disabled = true,
        Callback = function(self, value)
            print("Console Mode: " .. tostring(value))
        end
    })
    SettingsTab:Separator({Text = "Config Management"})
    local configRow = SettingsTab:Row()
    configRow:Button({
        Text = "Dump Config",
        Callback = function()
            print("Dumped Config:\n" .. SettingsTab.Parent.Parent:DumpIni(true))
        end
    })
    configRow:Button({
        Text = "Save Config",
        Callback = function()
            local MySaveString = SettingsTab.Parent.Parent:DumpIni(true)
            print("Config saved!")
        end
    })
    configRow:Button({
        Text = "Load Config",
        Callback = function()
            local MySaveString = SettingsTab.Parent.Parent:DumpIni(true) -- Пример, замените на реальную переменную
            if MySaveString then
                SettingsTab.Parent.Parent:LoadIni(MySaveString, true)
                print("Config loaded!")
            else
                warn("No save data!")
            end
        end
    })
    configRow:Button({
        Text = "Reset Config",
        Callback = function()
            SettingsTab.Parent.Parent:LoadIni("", true)
            print("Config reset!")
        end
    })
    SettingsTab:Separator({Text = "Keybinds"})
    SettingsTab:Keybind({
        IniFlag = "HideReGuiKeybind",
        Label = "Toggle UI Visibility",
        Value = Enum.KeyCode.RightShift,
        Callback = function()
            SettingsTab.Parent:ToggleVisibility()
            print("Toggled ReGui visibility!")
        end
    })
end

return initSettings
